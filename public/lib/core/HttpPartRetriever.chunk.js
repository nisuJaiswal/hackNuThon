/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[0],{473:function(ja,ba,e){e.r(ba);e.d(ba,"ByteRangeRequest",function(){return la});var ha=e(0),ia=e(1);e.n(ia);var fa=e(3),z=e(167);ja=e(103);var ea=e(274),aa=e(83),y=e(78),x=e(273),w=e(185);e=e(411);var r=[],f=[],n=window,ca=function(){return function(){this.In=1}}(),h;(function(e){e[e.UNSENT=0]="UNSENT";e[e.DONE=4]="DONE"})(h||(h={}));var la=function(){function e(e,f,r,w){var y=this;this.url=e;this.range=f;this.Sf=r;this.withCredentials=
w;this.i9=h;this.request=new XMLHttpRequest;this.request.open("GET",this.url,!0);n.Uint8Array&&(this.request.responseType="arraybuffer");w&&(this.request.withCredentials=w);ka.DISABLE_RANGE_HEADER||(Object(ia.isUndefined)(f.stop)?this.request.setRequestHeader("Range","bytes="+f.start):this.request.setRequestHeader("Range",["bytes=",f.start,"-",f.stop-1].join("")));r&&Object.keys(r).forEach(function(e){y.request.setRequestHeader(e,r[e])});this.request.overrideMimeType?this.request.overrideMimeType("text/plain; charset=x-user-defined"):
this.request.setRequestHeader("Accept-Charset","x-user-defined");this.status=x.a.NOT_STARTED}e.prototype.start=function(e){var f=this,h=this.request;h.onreadystatechange=function(){if(f.aborted)return f.status=x.a.ABORTED,e({code:x.a.ABORTED});if(this.readyState===f.i9.DONE){f.XE();var r=0===window.document.URL.indexOf("file:///");200===h.status||206===h.status||r&&0===h.status?(r=n.$Y(this),f.kw(r,e)):(f.status=x.a.ERROR,e({code:f.status,status:f.status}))}};this.request.send(null);this.status=x.a.STARTED};
e.prototype.kw=function(e,f){this.status=x.a.SUCCESS;if(f)return f(!1,e)};e.prototype.abort=function(){this.XE();this.aborted=!0;this.request.abort()};e.prototype.XE=function(){var h=Object(w.c)(this.url,this.range,f);-1!==h&&f.splice(h,1);if(0<r.length){h=r.shift();var n=new e(h.url,h.range,this.Sf,this.withCredentials);h.request=n;f.push(h);n.start(Object(w.d)(h))}};e.prototype.extend=function(e){var f=Object.assign({},this,e.prototype);f.constructor=e;return f};return e}(),ka=function(e){function h(f,
h,n,r,w){n=e.call(this,f,n,r)||this;n.dk={};n.wD=h;n.url=f;n.DISABLE_RANGE_HEADER=!1;n.pA=la;n.RR=3;n.Sf=w||{};return n}Object(ha.c)(h,e);h.prototype.Ux=function(e,f,h){var n=-1===e.indexOf("?")?"?":"&";switch(h){case !1:case y.a.NEVER_CACHE:e=e+n+"_="+Object(ia.uniqueId)();break;case !0:case y.a.CACHE:e=e+n+"_="+f.start+","+(Object(ia.isUndefined)(f.stop)?"":f.stop)}return e};h.prototype.vW=function(e,f,h,n){void 0===h&&(h={});return new this.pA(e,f,h,n)};h.prototype.Zga=function(e,h,n,w,x){for(var y=
0;y<r.length;y++)if(Object(ia.isEqual)(r[y].range,h)&&Object(ia.isEqual)(r[y].url,e))return r[y].Gh.push(w),r[y].jG++,null;for(y=0;y<f.length;y++)if(Object(ia.isEqual)(f[y].range,h)&&Object(ia.isEqual)(f[y].url,e))return f[y].Gh.push(w),f[y].jG++,null;n={url:e,range:h,wD:n,Gh:[w],jG:1};if(0===r.length&&f.length<this.RR)return f.push(n),n.request=this.vW(e,h,x,this.withCredentials),n;r.push(n);return null};h.prototype.Bp=function(e,h,n){var x=this.Ux(e,h,this.wD);(e=this.Zga(x,h,this.wD,n,this.Sf))&&
e.request.start(Object(w.d)(e));return function(){var e=Object(w.c)(x,h,f);if(-1!==e){var n=--f[e].jG;0===n&&f[e].request&&f[e].request.abort()}else e=Object(w.c)(x,h,r),-1!==e&&(n=--r[e].jG,0===n&&r.splice(e,1))}};h.prototype.zY=function(){return{start:-z.a}};h.prototype.Nka=function(){var e=-(z.a+z.e);return{start:e-z.d,end:e}};h.prototype.nv=function(e){var f=this;this.CD=!0;var h=z.a;this.Bp(this.url,this.zY(),function(n,r,w){function x(){var h=f.ce.wY();f.Bp(f.url,h,function(n,r){if(n)return Object(fa.j)("Error loading central directory: "+
n),e(n);r=Object(aa.a)(r);if(r.length!==h.stop-h.start)return e("Invalid XOD file: Zip central directory data is wrong size! Should be "+(h.stop-h.start)+" but is "+r.length);f.ce.g2(r);f.JK=!0;f.CD=!1;return e(!1)})}if(n)return Object(fa.j)("Error loading end header: "+n),e(n,r,w);r=Object(aa.a)(r);if(r.length!==h)return e("Invalid XOD file: Zip end header data is wrong size!");try{f.ce=new ea.a(r)}catch(qa){return e(qa)}f.ce.Fma?f.Bp(f.url,f.Nka(),function(h,n){if(h)return Object(fa.j)("Error loading zip64 header: "+
h),e(h);n=Object(aa.a)(n);f.ce.$ma(n);x()}):x()})};h.prototype.WY=function(e){e(Object.keys(this.ce.$o))};h.prototype.jP=function(e,f){var h=this;if(this.ce.kW(e)){var n=this.ce.Fy(e);if(n in this.dk){var r=this.Yh[e];r.Yt=this.dk[n];r.Yt.In++;r.cancel=r.Yt.cancel}else{var w=this.ce.Yia(e),x=this.Bp(this.url,w,function(r,x){r?(Object(fa.j)('Error loading part "'+e+'": '+r),h.Bp(h.url,w,function(r,x){if(r)return f(r,e);h.k2(x,w,n,e,f)})):h.k2(x,w,n,e,f)}),y=this.Yh[e];y&&(y.O4=!0,y.cancel=function(){y.Yt.In--;
0===y.Yt.In&&(x(),delete h.dk[n])},this.dk[n]=new ca(n),y.Yt=this.dk[n],y.Yt.cancel=y.cancel)}}else delete this.Yh[e],f(Error('File not found: "'+e+'"'),e)};h.prototype.k2=function(e,f,h,n,r){if(e.length!==f.stop-f.start)r(Error("Part data is wrong size!"),n);else{do{if(!this.dk[h])return;n=this.dk[h].In;for(var w=f.ts.length,x=0;x<w;++x){var y=f.ts[x];r(!1,y.os,e["string"===typeof e?"substring":"subarray"](y.start,y.stop),this.ce.g_(y.os));y.os in this.Yh&&delete this.Yh[y.os]}}while(n!==this.dk[h].In);
delete this.dk[h]}};h.DISABLE_RANGE_HEADER=!1;h.RR=3;return h}(ja.a);(function(e){function f(f,h,n){var r=e.call(this)||this,w;for(w in f)r[w]=f[w];r.Sza=f;r.startOffset=h;r.endOffset=n;r.vW=function(e,h,n,w){Object(ia.isUndefined)(h.stop)?(h.start+=r.endOffset,h.stop=r.endOffset):(h.start+=r.startOffset,h.stop+=r.startOffset);e=r.Ux(r.url,h,r.wD);return new f.pA(e,h,n,w)};return r}Object(ha.c)(f,e);return f})(ka);Object(e.a)(ka);Object(e.b)(ka);ba["default"]=ka}}]);}).call(this || window)
