/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[21],{491:function(ja,ba,e){function ha(e){return Object(Da.b)(void 0,void 0,void 0,function(){var f,h,n,r,w,x,y,z,ca,ea,ba,ha,fa,ia,ja;return Object(Da.d)(this,function(ka){switch(ka.label){case 0:return f=e.xb,h=e.En,n=e.Ip,r=e.Vu,w=e.E_,x=e.u_,y=Ya.getDocument(),z=[1],[4,Object(Ga.c)(h,{extension:"pdf"})];case 1:return ca=ka.ba(),ea=Ya.pa(),fa=(ha=Ma.a).U1,[4,ca.ly()];case 2:return ba=fa.apply(ha,[ka.ba().xfdfString,f]),ia=!0,
[4,y.Zf(ca,z,f,ia)];case 3:return ka.ba(),[4,y.zg([f+1],ia)];case 4:return ka.ba(),ja=ea.mb().filter(function(e){return e.IF()&&e.PageNumber===f}),ea.Ze(ja,{force:!0,source:"contentEditTool"}),[4,ea.uF(ba)];case 5:return ka.ba(),Za||(Ya.getDocument().SG(),Ya.tA(f),Ya.$d()),aa(f),x||w||Ba(f,n,r,w),[2]}})})}function ia(e){if(e)return fa(e.contents);Object(Aa.g)("Unable to extract document content")}function fa(e){e=(new DOMParser).parseFromString(e,"text/html").documentElement.querySelector("body");
e.querySelectorAll("p").forEach(function(e){e.querySelectorAll("span").forEach(function(e){var f=e.getAttribute("style");f=z(f,e.innerHTML);e.innerHTML=f});var f=e.getAttribute("style"),h=e.innerHTML.Wh("<br>","");e.innerHTML=z(f,h)});return e.innerHTML.trim()}function z(e,f){if(null===e||void 0===e?0:e.includes("bold"))f="<strong>"+f+"</strong>";if(null===e||void 0===e?0:e.includes("italic"))f="<em>"+f+"</em>";if((null===e||void 0===e?0:e.includes("underline:1;"))||(null===e||void 0===e?0:e.includes("text-decoration: underline")))f=
"<u>"+f+"</u>";return f}function ea(e){if(["STRONG","EM","U"].includes(e.tagName)&&null!==e.getAttribute("style")){var f=document.createElement("span"),h=e.style.color;h=na(h);f.setAttribute("style","color:"+h);e.removeAttribute("style");f.innerHTML=e.innerHTML;e.innerHTML="";e.appendChild(f)}else"SPAN"===e.tagName&&null!==e.getAttribute("style")?(h=e.style.color,h=na(h),e.setAttribute("style","color:"+h)):"A"===e.tagName&&e.removeAttribute("style")}function aa(e){var f=Ya.pa(),h=f.mb().filter(function(f){return f.Ld()&&
f.PageNumber===e});f.Ze(h,{force:!0,source:"contentEditTool"})}function y(e,f){f.forEach(function(f){gb[e]||(gb[e]=[]);gb[e].find(function(e){return e.id===f.id})||gb[e].push(f)})}function x(e,f){f.forEach(function(f){nb[e]||(nb[e]=[]);nb[e].find(function(e){return e.id===f.id})||nb[e].push(f)})}function w(e,f,h,n){return Object(Da.b)(void 0,void 0,void 0,function(){var w,x,y,z,aa,ca,ea,ba,ha,ia,ja,ka,oa,la,ma,na,pa,qa;return Object(Da.d)(this,function(Ba){switch(Ba.label){case 0:if(!e)return[2];
w=f.Wh("<p><br></p>","");x=r(w);x=x.replace(/<span style="color: var\(--text-color\);">(.*?)<\/span>/g,"$1");x=x.replace(/<span class="ql-cursor">(.*?)<\/span>/g,"");y=e.Nc.id;z=e.PageNumber;aa=Va[z];ca=aa.galleys.find(function(e){return e.id===y});ea=fa(ca.contents);ba=ra(z,aa,ea,x,y);if(""===ba)return[3,2];ha=new TextEncoder;ia=ha.encode(ba);ja=ia.buffer;ka=Object(ya.c)()||"https://www.pdftron.com/webfonts/v2/";oa=Ya.getDocument();return[4,oa.bd([z],void 0,!0)];case 1:return la=Ba.ba(),ha=new TextEncoder,
ma=ha.encode(""),na=ma.buffer,Sa.postMessage({cmd:"importText",pdfFile:la,pageNumber:z,webFontURL:ka,galleyId:y,importData:ja,tableData:na,isSearchReplace:h,callbackMapId:n},[ja,na]),pa={},ca&&(qa=ca.galleyBox,pa={top:qa.top,left:qa.left,bottom:qa.bottom,right:qa.right}),Object(Ka.C)(ea,x,pa),[3,3];case 2:Object(Aa.g)("Unable to generate import XML"),Ba.label=3;case 3:return[2]}})})}function r(e){var f=new DOMParser,h=f.parseFromString(e,"text/xml");h.querySelector("parsererror")&&(h=f.parseFromString("<Root>"+
e+"</Root>","text/xml"));h.querySelectorAll("a").forEach(function(e){var f=e.childNodes[0];Array.from(e.querySelectorAll("*")).find(function(e){return"u"===e.tagName.toLowerCase()})||(e=document.createElement("u"),f.after(e),e.appendChild(f))});return(new XMLSerializer).serializeToString(h)}function f(e,f,h){return Object(Da.b)(void 0,void 0,void 0,function(){var n,r,w,x;return Object(Da.d)(this,function(y){switch(y.label){case 0:return aa(f),nb[f]=[],gb[f]=[],[4,e.bd([f],void 0,!0)];case 1:return n=
y.ba(),r=new TextEncoder,w=r.encode(""),x=w.buffer,Sa.postMessage({cmd:"exportFile",pageNumber:f,performExport:h,pdfFile:n,tableData:x},[n,x]),[2]}})})}function n(e){return Object(Da.b)(void 0,void 0,void 0,function(){return Object(Da.d)(this,function(){Ta||(Ya=e.Ea,Ta=new Promise(function(e,f){var h=window.Core.ContentEdit.getWorkerPath(),n=window.Core.ContentEdit.getResourcePath();Sa=new Worker(h+"InfixServerModule.js");Sa.onmessage=function(h){pa(h,e,f)};Sa.postMessage({cmd:"isReady",resourcePath:n})}));
return[2,Ta]})})}function ca(e,f,h,n){this.top=e;this.left=f;this.bottom=h;this.right=n;this.topVal=function(){return Math.round(this.top)};this.bottomVal=function(){return Math.round(this.bottom)};this.leftVal=function(){return Math.round(this.left)};this.rightVal=function(){return Math.round(this.right)};this.height=function(){return Math.round(Math.abs(this.top-this.bottom))};this.width=function(){return Math.round(this.right-this.left)};this.Dx=function(e){return this.topVal()!==e.topVal()||this.leftVal()!==
e.leftVal()||this.bottomVal()!==e.bottomVal()||this.rightVal()!==e.rightVal()}}function h(e,f,h,n,r){this.id=e;this.pagenum=f;this.galleysContents=h;this.contents=n;this.galleyBox=r;Object(Ka.B)(nb)}function la(e,f,h,n){this.id=f;this.type=e;this.bbox=h;this.pagenum=n}function ka(e,f,h,n,r){this.id=e;this.pagecount=f;this.pageBBox=h;this.galleys=n;this.objects=r}function ma(e,f){this.family=e;this.variations=f}function ra(e,f,h,n,r){var w=[],x=[];(new DOMParser).parseFromString(n,"text/html").documentElement.querySelectorAll("p").forEach(function(e,
f){w[f]=e.innerHTML;x[f]={fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,color:na(e.style.color)}});h=(new DOMParser).parseFromString(h,"text/html");var y=null;h.documentElement.querySelectorAll("p").forEach(function(e,f){if(f<w.length){var h=(new DOMParser).parseFromString(w[f],"text/html").documentElement.querySelector("body");h.childNodes.forEach(function(e){ea(e)});e.innerHTML=h.innerHTML;y=e.getAttribute("style");h=x[f].fontSize?x[f].fontSize:e.style.fontSize;var n=x[f].fontFamily?x[f].fontFamily.replace(/\s+/g,
"").replace(/['"]+/g,""):e.style.fontFamily;f=x[f].color?x[f].color:null;y=y.replace(/(font:.*?;)/i,"font:normal normal "+h+" "+n+";");y=y.replace("Italic","");y=y.replace("underline:1;","underline:0;");y=y.replace("text-decoration: underline;","text-decoration: none;");f&&(y=y.replace(/(color:.*?;)/i,"color:"+f+";"));e.setAttribute("style",y)}else e.remove()});for(n=h.documentElement.querySelectorAll("p").length;n<w.length;n++){var z=document.createElement("p");z.setAttribute("id","0");var aa=(new DOMParser).parseFromString(w[n],
"text/html").documentElement.querySelector("body");aa.childNodes.forEach(function(e){ea(e)});z.innerHTML=aa.innerHTML;null!=y&&z.setAttribute("style",y);h.documentElement.querySelector("body").appendChild(z)}h=h.documentElement.querySelector("body").innerHTML;var ca="";nb[e].forEach(function(e){e.id===r&&(ca=e)});if(""===ca)return"";f="<DOC id='"+f.id+"' pagecount='"+f.pagecount+"'>";f=f+("<STORY galley_ids='"+r+"' pagenum='"+e+"'>")+("<galleys>"+ca.galleysContents+"</galleys>");ca.contents=h;f=f+
h+"\n</STORY>";return f+="</DOC>"}function na(e){return e.startsWith("rgb(")?"#"+e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"").split(",").map(function(e){return("00"+parseInt(e,10).toString(16)).slice(-2)}).join(""):e}function xa(e,f,n,r){var w=[],x=Ya.getDocument(),y=null;f.forEach(function(f){if(f instanceof la){var z=x.gl(e,f.bbox.leftVal(),f.bbox.topVal());var aa=z.x;var ca=z.y;var ea=x.gl(e,f.bbox.rightVal(),f.bbox.bottomVal());z=ea.x;ea=ea.y}else if(f instanceof h)z=x.gl(e,f.galleyBox.leftVal(),
f.galleyBox.topVal()),aa=z.x,ca=z.y,ea=x.gl(e,f.galleyBox.rightVal(),f.galleyBox.bottomVal()),z=ea.x,ea=ea.y;else return;var ba=new window.Core.Annotations.RectangleAnnotation,ha=va.a.OBJECT;f instanceof h&&(ha=va.a.TEXT);ba.M3(f,ha);ba.PageNumber=f.pagenum;ba.X=aa;ba.Y=ca;ba.Width=z-aa;ba.Height=ea-ca;ba.StrokeColor=new Ia.a("#3183C8");ba.FillColor=new Ia.a(255,255,255,.01);ba.Style="dash";ba.Dashes="4,3";if(Pa||r)ba.NoView=!0,ba.Listable=!1;ba.fu();ba.selectionModel=La.a;w.push(ba);"undefined"!==
typeof n&&n===f.id&&(y=ba)});f=Ya.pa();f.Ch(w);!y||Pa||r||f.Bg(y);f.Ke(w)}function pa(e,f,h){return Object(Da.b)(this,void 0,void 0,function(){var n,r,w,x,y,z,aa,ca,ea,ba;return Object(Da.d)(this,function(fa){switch(fa.label){case 0:n=e.data;w=n.cmd;switch(w){case "isReady":return[3,1];case "initialiseInfixServer":return[3,3];case "loadAvailableFonts":return[3,4];case "exportFile":return[3,5];case "insertNewTextBox":return[3,6];case "importText":return[3,7];case "transformObject":return[3,7];case "alignParagraph":return[3,
7];case "deleteObject":return[3,8];case "insertImage":return[3,9]}return[3,10];case 1:return[4,Object(Ja.b)()];case 2:return x=fa.ba(),Sa.postMessage({cmd:"initialiseInfixServer",l:x}),[3,10];case 3:return(y=Ha(n.resultsXML))?(f(),z=Object(ya.c)()||"https://www.pdftron.com/webfonts/v2/",Sa.postMessage({cmd:"loadAvailableFonts",webFontURL:z})):h("License key does not have content edit permission"),[3,10];case 4:return Ca(n.resultsXML),[3,10];case 5:return n.exportPerformed?qa(n.pageNumber,n.exportXML,
n.objectXML,n.resultsXML):(r=Va[n.pageNumber],oa(n.pageNumber,r)),$a.resolve(),kb&&kb[n.pageNumber]&&kb[n.pageNumber].resolve(),[3,10];case 6:return ta(n.pageNumber,n.exportXML,n.contentHTML),r=Va[n.pageNumber],ha({xb:n.pageNumber,En:n.pdfBuffer,Ip:r,Vu:n.id}),[3,10];case 7:r=Va[n.pageNumber];Fa(n.pageNumber,n.resultsXML);ha({xb:n.pageNumber,En:n.pdfBuffer,Ip:r,Vu:n.id,E_:n.isSearchReplace});aa=n.isSearchReplace;ca=n.callbackMapId;if(aa&&ca&&Cb[ca])Cb[ca]();return[3,10];case 8:return r=Va[n.pageNumber],
Fa(n.pageNumber,n.resultsXML),r.galleys=r.galleys.filter(function(e){return e.id!==n.id}),r.objects=r.objects.filter(function(e){return e.id!==n.id}),ea={xb:n.pageNumber,En:n.pdfBuffer,Ip:r},ha(ea),[3,10];case 9:return r=Va[n.pageNumber],Fa(n.pageNumber,n.resultsXML),ba={xb:n.pageNumber,En:n.pdfBuffer,Ip:r,Vu:n.isText,u_:!0},ha(ba),[3,10];case 10:return[2]}})})}function Ha(e){e=new Uint8Array(e);var f=(new TextDecoder("utf-8")).decode(e);e=!1;f=(new DOMParser).parseFromString(f,"text/xml").getElementsByTagName("LicenseCheck");
null!==f&&0<f.length&&(f=f[0].getElementsByTagName("Status")[0].innerHTML,"error"!==f&&"ok"===f&&(e=!0));return e}function ta(e,f){f=(new TextDecoder("utf-8")).decode(f);f=(new DOMParser).parseFromString(f,"text/xml").getElementsByTagName("STORY");var n=Array.prototype.slice.call(f)[0];f=n.getAttribute("galley_ids");var r=Array.prototype.slice.call(n.getElementsByTagName("g"))[0],w=r.getAttribute("bbox").split(" ");w=new ca(parseFloat(w[0]),parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]));r=r.innerHTML;
var x=Array.prototype.slice.call(n.getElementsByTagName("galleys"))[0];x.parentNode.removeChild(x);n=sa(n.innerHTML).trim();f=new h(f,e,r,n,w);n=Va[e];w=n.galleys;w.push(f);n.galleys=w;Va[e]=n;oa(e,n)}function oa(e,f){x(e,f.galleys);y(e,f.objects);aa(e);Ba(e,f)}function Ba(e,f,h,n){xa(e,f.objects,h,n);xa(e,f.galleys,h,n)}function qa(e,f,h,n){var r=new Uint8Array(f),w=new TextDecoder("utf-8");f=w.decode(r);r=new Uint8Array(h);h=w.decode(r);r=new Uint8Array(n);n=w.decode(r);Va[e]=ua(e,f,h,n);oa(e,Va[e])}
function za(e,f){e=parseFloat(e);return isNaN(f)||f<e?e:f}function ua(e,f,n,r){var w;var x=new DOMParser;r=x.parseFromString(r,"text/xml");Array.prototype.slice.call(r.getElementsByTagName("BBox")).forEach(function(e){if("CropBox"===e.getAttribute("Name")){var f=parseFloat(e.getElementsByTagName("Top").item(0).innerHTML),h=parseFloat(e.getElementsByTagName("Bottom").item(0).innerHTML),n=parseFloat(e.getElementsByTagName("Left").item(0).innerHTML);e=parseFloat(e.getElementsByTagName("Right").item(0).innerHTML);
w=new ca(f,n,h,e)}});x=new DOMParser;r=x.parseFromString(f,"text/xml");var y=[];Array.prototype.slice.call(r.getElementsByTagName("STORY")).forEach(function(f){var n=f.getAttribute("galley_ids"),r=Array.prototype.slice.call(f.getElementsByTagName("g"))[0],w=r.getAttribute("bbox").split(" ");w=new ca(parseFloat(w[0]),parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]));r=r.innerHTML;var x=Array.prototype.slice.call(f.getElementsByTagName("galleys"))[0];x.parentNode.removeChild(x);f=sa(f.innerHTML).trim();
n=new h(n,e,r,f,w);y.push(n)});x=new DOMParser;var z=[];f=x.parseFromString(n,"text/xml").getElementsByTagName("Object");Array.prototype.slice.call(f).forEach(function(f){var h=f.getAttribute("Type"),n=f.getAttribute("OID");f=Array.prototype.slice.call(f.getElementsByTagName("Point"));var r=Number.NaN,w=Number.NaN,x=Number.NaN,y=Number.NaN;f.forEach(function(e){var f=e.getAttribute("Name");"TL"===f?(r=za(e.getAttribute("Y"),r),x=za(e.getAttribute("X"),x)):"TR"===f?(r=za(e.getAttribute("Y"),r),y=za(e.getAttribute("X"),
y)):"BR"===f?(w=za(e.getAttribute("Y"),w),y=za(e.getAttribute("X"),y)):"BL"===f&&(w=za(e.getAttribute("Y"),w),x=za(e.getAttribute("X"),x))});z.push(new la(h,n,new ca(r,x,w,y),e))});f=Array.prototype.slice.call(r.getElementsByTagName("DOC"))[0].getAttribute("id");return new ka(f,1,w,y,z)}function sa(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.querySelector("body").innerHTML}function Fa(e,f){var h;f=(new TextDecoder("utf-8")).decode(f);var n=(new DOMParser).parseFromString(f,
"text/xml");f=n.getElementsByTagName("Galley").item(0);if(null!=f){var r=f.getAttribute("id");f=n.getElementsByTagName("BBox");f=Array.prototype.slice.call(f);f.forEach(function(e){var f=e.getElementsByTagName("Top"),n=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Left");var r=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Bottom");var w=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Right");e=parseFloat(f.item(0).innerHTML);h=new ca(n,r,w,e)});nb[e].forEach(function(e){e.id===
r&&!0===h.Dx(e.galleyBox)&&(e.galleyBox=h)})}f=n.getElementsByTagName("Object").item(0);if(null!=f){var w=f.getAttribute("OID");f=n.getElementsByTagName("BBox");f=Array.prototype.slice.call(f);f.forEach(function(e){var f=e.getElementsByTagName("Top"),n=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Left");var r=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Bottom");var w=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Right");e=parseFloat(f.item(0).innerHTML);h=new ca(n,
r,w,e)});gb[e].forEach(function(e){e.id===w&&!0===h.Dx(e.bbox)&&(e.bbox=h)})}f=n.getElementsByTagName("NewParas").item(0);if(null!=f){var x=f.getAttribute("id");nb[e].forEach(function(e){if(e.id===x){var f="<Contents>"+e.contents;f+="</Contents>";var h=Array.prototype.slice.call(n.getElementsByTagName("NewPara"));f=(new DOMParser).parseFromString(f,"text/xml");var r=Array.prototype.slice.call(f.getElementsByTagName("p"));h.forEach(function(e){var f=parseFloat(e.innerHTML),h=!1;r.forEach(function(e){var n=
e.getAttribute("id");!1===h&&"0"===n&&(e.setAttribute("id",f),h=!0)})});e.contents=f.getElementsByTagName("Contents").item(0).innerHTML}})}}function Ea(e){return{regex:0!==(e&Qa.f.$s),wildcard:0!==(e&Qa.f.nq),wholeWord:0!==(e&Qa.f.dt),caseSensitive:0!==(e&Qa.f.iq)}}function Ca(e){e=new Uint8Array(e);e=(new TextDecoder("utf-8")).decode(e);e=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Font");var f={};Array.prototype.slice.call(e).forEach(function(e){var h=e.getAttribute("Family");
h in f||(f[h]={});var n=[];Array.prototype.slice.call(e.getElementsByTagName("Variation")).forEach(function(e){e=e.innerHTML;n.push(e);if(e.includes("Regular")||e===h.replace(/\s+/g,""))f[h].hasRegular=!0;e.includes("Bold")&&(f[h].hasBold=!0);e.includes("Italic")&&(f[h].hasItalic=!0)});ab.push(new ma(h,n))});Gb=Object.keys(f).filter(function(e){return f[e].hasRegular&&f[e].hasBold&&f[e].hasItalic})}e.r(ba);var Da=e(0),Ga=e(37),Ia=e(7),La=e(348),ya=e(31),Ja=e(59),Aa=e(3),va=e(109),Ka=e(39),Ma=e(6),
Ra=e(145),Qa=e(27),wa=e(9),Na=e(25),Sa=null,Ta=null,Pa=!1,Za=!1,nb={},gb={},Va={},Ya,$a=window.createPromiseCapability(),kb=[],ab=[],Gb=[],Cb={};ba["default"]={S1:n,T1:f,NW:function(e){return Object(Da.b)(void 0,void 0,void 0,function(){var f,h,n,r,w,x,y,z;return Object(Da.d)(this,function(aa){switch(aa.label){case 0:return f=e.id,h=e.isText,n=e.pageNumber,r=Ya.getDocument(),[4,r.bd([n],void 0,!0)];case 1:return w=aa.ba(),x=new TextEncoder,y=x.encode(""),z=y.buffer,Sa.postMessage({cmd:"deleteObject",
pdfFile:w,pageNumber:n,objectID:f,isText:h,tableData:z},[z]),[2]}})})},w5:function(e){return Object(Da.b)(void 0,void 0,void 0,function(){var f,h,n,r,w,x,y,z,aa,ca,ea,ba,ha;return Object(Da.d)(this,function(fa){switch(fa.label){case 0:return f=e.id,h=e.position,n=h.top,r=h.left,w=h.bottom,x=h.right,y=e.isText,z=e.pageNumber,aa=Ya.getDocument(),[4,aa.bd([z],void 0,!0)];case 1:return ca=fa.ba(),ea=new TextEncoder,ba=ea.encode(""),ha=ba.buffer,Sa.postMessage({cmd:"transformObject",pdfFile:ca,pageNumber:z,
objectID:f,isText:y,topVal:n,leftVal:r,bottomVal:w,rightVal:x,tableData:ha},[ha]),[2]}})})},$U:function(e,f){return Object(Da.b)(void 0,void 0,void 0,function(){var h,n,r,w,x,y,z,aa,ca,ba,ha,fa,ia,ja,ka;return Object(Da.d)(this,function(oa){switch(oa.label){case 0:return h="<DOC><STORY><galleys></galleys>",n=[],r=(new DOMParser).parseFromString(f,"text/html"),r.documentElement.querySelectorAll("p").forEach(function(e,f){n[f]=e.innerHTML}),n.forEach(function(e,f){e=(new DOMParser).parseFromString(n[f],
"text/html").documentElement.querySelector("body");e.childNodes.forEach(function(e){ea(e)});h+="<p>"+e.innerHTML+"</p>"}),h+="</STORY></DOC>",w=e.pageNumber,x=Ya.getDocument(),y=e.position,z=y.top,aa=y.left,ca=y.bottom,ba=y.right,ha=e.defaultText,fa=e.font,ia=e.fontSize,ja=e.textColor,[4,x.bd([w],void 0,!0)];case 1:return ka=oa.ba(),Sa.postMessage({cmd:"insertNewTextBox",pdfFile:ka,pageNumber:w,topVal:z,leftVal:aa,bottomVal:ca,rightVal:ba,defaultText:ha,font:fa,fontSize:ia,textColor:ja,importData:h,
content:f}),[2]}})})},F5:w,xY:ia,u3:function(e){return Object(Da.b)(this,void 0,void 0,function(){var h,r,x,y,z,aa,ca,ea,ba,ha,fa,ja,ka,oa,la,ma,na,pa,qa,Ba,za,ra,ua=this;return Object(Da.d)(this,function(xa){switch(xa.label){case 0:h=e.replaceWith;r=e.documentViewer;x=e.search;y=e.searchResults;if(r){if(!y&&!x)throw Error('The "searchResults" parameter is missing in the options');if(void 0===h)throw Error('The "replaceWith" parameter should not be undefined');}else throw Error('The "documentViewer" parameter is missing in the options');
z=1===y.length;x?(aa=x.HK,ca=x.pR):(ea=Ea(r.By()),aa=ea.HK,ca=ea.pR);ba=null;ha=[];if(z)ba=y[0],ha=[ba.pageNum];else try{ha=Object.keys(y.reduce(function(e,f){e[f.pageNum]=f.pageNum;return e},{})).map(function(e){return Number(e)})}catch(ld){Object(Aa.i)(ld)}fa=0;if(ba)for(ja=r.Aj(),ka=-1,oa=0,la=ja.length;oa<la&&(ma=ja[oa],ma.pageNum===ka?fa++:(ka=ma.pageNum,fa=0),!Object(Ra.a)(ma,ba));oa++);na=y[0].resultStr;pa=aa?"mg":"mgi";qa=ca?"\\b("+na+")\\b":"("+na+")";Ba=new RegExp("(?<!</?[^>]*|&[^;]*)"+
qa,pa);$a=window.createPromiseCapability();return Ta?[3,2]:[4,n(r.fp())];case 1:xa.ba(),xa.label=2;case 2:return Pa=!0,Ka.a.trigger(wa.e.SEARCH_AND_REPLACE_STARTED),za=0,ra=ha.map(function(e){return Object(Da.b)(ua,void 0,void 0,function(){var n,x=this;return Object(Da.d)(this,function(){n=new Promise(function(n,aa){return Object(Da.b)(x,void 0,void 0,function(){var x=this;return Object(Da.d)(this,function(ca){switch(ca.label){case 0:return kb[e]=window.createPromiseCapability(),[4,f(r.getDocument(),
e,!0)];case 1:return ca.ba(),kb[e].promise.then(function(){return Object(Da.b)(x,void 0,void 0,function(){function f(e,f){return Object(Da.b)(this,void 0,void 0,function(){var h,r;return Object(Da.d)(this,function(x){switch(x.label){case 0:h=Object(Na.f)(),Cb[h]=function(){delete Cb[h];n(!0);Ka.a.trigger(wa.e.SEARCH_AND_REPLACE_TEXT_REPLACED)},x.label=1;case 1:return x.Qe.push([1,3,,4]),[4,w(e,f,!0,h)];case 2:return x.ba(),[3,4];case 3:return r=x.ba(),Object(Aa.i)(r),aa(r),[3,4];case 4:return[2]}})})}
var r,x,ca,ea,ha,ja,ka,oa,la,ma,pa,qa,ra,ua,xa,sa,Ga;return Object(Da.d)(this,function(){r=Ya.pa();x=r.mb().filter(function(f){return f.PageNumber===e}).filter(function(e){return e.Ld()}).concat();ca=[];ha=ea=0;for(ja=x.length;ha<ja;ha++){ka=x[ha];oa=ka.Nc;la=ia(oa);ma=[];try{for(pa=void 0;null!==(pa=Ba.exec(la));)ma.push(pa),ca.push(y[za]),za++}catch(xd){Object(Aa.i)(xd)}if(ma.length)if(ea+=ma.length,z&&ea>fa){qa=Math.abs(ea-ma.length-fa);ra=ma[qa].index;ua=la.substr(0,ra);xa=h;sa=la.substr(ra+na.length,
la.length);Ga=""+ua+xa+sa;Ka.a.trigger(wa.e.SEARCH_AND_REPLACE_TEXT_FOUND,[[ba]]);f(ka,Ga);break}else z||(Za=!0,Ga=la.replace(Ba,h),Ka.a.trigger(wa.e.SEARCH_AND_REPLACE_TEXT_FOUND,[ca]),f(ka,Ga))}return[2]})})}).catch(aa),[2]}})})});return[2,n]})})}),[2,Promise.all(ra).then(function(){z&&ba?setTimeout(function(){var e=[];r.pw(y[0].resultStr,r.By(),{startPage:ha[0],endPage:ha[0],fullSearch:!0,onDocumentEnd:function(){Za=Pa=!1;Ka.a.trigger(wa.e.SEARCH_AND_REPLACE_ENDED);r.YH(ha[0]-1,e)},onResult:function(f){f.resultCode===
Qa.e.$l&&e.push(f)}})},200):(r.OK(),r.Cl(),r.$d(),Za=Pa=!1,Ka.a.trigger(wa.e.SEARCH_AND_REPLACE_ENDED));var e=Ya.pa(),f=e.mb().filter(function(e){return e.Ld()});e.Ze(f,{force:!0,source:"contentEditTool"})})]}})})},N3:function(e,f){var h=fa(e.Nc.contents);h=(new DOMParser).parseFromString(h,"text/html").documentElement.querySelector("body");var n=h.querySelectorAll("p"),r=new XMLSerializer;n.forEach(function(e){e.style.fontFamily=f});h=r.serializeToString(h);w(e,h)},O3:function(e,f){var h=fa(e.Nc.contents);
h=(new DOMParser).parseFromString(h,"text/html").documentElement.querySelector("body");var n=h.querySelectorAll("p"),r=new XMLSerializer;n.forEach(function(e){e.style.fontSize=f});h=r.serializeToString(h);w(e,h)},hV:function(e,f){return Object(Da.b)(void 0,void 0,void 0,function(){var h,n,r,w,x,y,z;return Object(Da.d)(this,function(aa){switch(aa.label){case 0:return h=e.Nc.id,n=e.PageNumber,r=Ya.getDocument(),[4,r.bd([n],void 0,!0)];case 1:return w=aa.ba(),x=new TextEncoder,y=x.encode(""),z=y.buffer,
Sa.postMessage({cmd:"AlignParaText",pdfFile:w,pageNumber:n,galleyID:h,alignment:f,topVal1:"",leftVal1:"",bottomVal1:"",rightVal1:"",topVal2:"",leftVal2:"",bottomVal2:"",rightVal2:"",tableData:z},[z]),[2]}})})},HV:function(e){var f=fa(e.Nc.contents);f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("body");var h=f.querySelectorAll("p"),n=new XMLSerializer,r="bold"===h[0].style.fontWeight,x=n.serializeToString(h[0]).includes("<strong>");h.forEach(function(e){if(r||x){e.style.fontWeight=
"normal";var f=n.serializeToString(e).replace(/<strong>/g,"");f=f.replace(/<\/strong>/g,"");f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("p");e.parentElement.replaceChild(f,e)}else e.style.fontWeight="bold",e.innerHTML="<strong>"+e.innerHTML.trim()+"</strong>"});f=n.serializeToString(f);w(e,f)},P_:function(e){var f=fa(e.Nc.contents);f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("body");var h=f.querySelectorAll("p"),n=new XMLSerializer,
r="italic"===h[0].style.fontStyle,x=n.serializeToString(h[0]).includes("<em>");h.forEach(function(e){if(r||x){e.style.fontStyle="normal";e.style.font.includes("Italic")&&(e.style.font=e.style.font.replace("Italic",""));var f=n.serializeToString(e).replace(/<em>/g,"");f=f.replace(/<\/em>/g,"");f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("p");e.parentElement.replaceChild(f,e)}else e.style.fontStyle="italic",e.innerHTML="<em>"+e.innerHTML.trim()+"</em>"});f=n.serializeToString(f);
w(e,f)},y5:function(e){var f=fa(e.Nc.contents);f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("body");var h=f.querySelectorAll("p"),n=new XMLSerializer,r=h[0].style.textDecoration.includes("underline")||h[0].style.textDecoration.includes("word"),x=n.serializeToString(h[0]).includes("<u>");h.forEach(function(e){if(r||x){e.style.textDecoration=e.style.textDecoration.replace("underline","");var f=n.serializeToString(e).replace(/<u>/g,"");f=f.replace(/<\/u>/g,"");f=(new DOMParser).parseFromString(f,
"text/html").documentElement.querySelector("p");e.parentElement.replaceChild(f,e)}else e.style.textDecoration.includes("none")?e.style.textDecoration=e.style.textDecoration.replace("none","underline"):e.style.textDecoration+=" underline",e.innerHTML="<u>"+e.innerHTML.trim()+"</u>"});f=n.serializeToString(f);w(e,f)},l4:function(e,f){var h=fa(e.Nc.contents);h=(new DOMParser).parseFromString(h,"text/html").documentElement.querySelector("body");var n=h.querySelectorAll("p"),r=new XMLSerializer;n.forEach(function(e){e.style.color=
f});h.querySelectorAll("span").forEach(function(e){e.setAttribute("style","color:"+f)});h=r.serializeToString(h);w(e,h)},mY:function(){return Gb},ZU:function(e){return Object(Da.b)(void 0,void 0,void 0,function(){var f,h,n,r,w,x,y,z,aa,ca;return Object(Da.d)(this,function(ea){switch(ea.label){case 0:return f=e.pageNumber,h=e.newImage,n=e.scaleType,r=e.position,w=r.top,x=r.left,y=r.bottom,z=r.right,aa=Ya.getDocument(),[4,aa.bd([f],void 0,!0)];case 1:return ca=ea.ba(),Sa.postMessage({cmd:"insertImage",
pdfFile:ca,pageNumber:f,newImage:h,scaleType:n,topVal:w,leftVal:x,bottomVal:y,rightVal:z},[]),[2]}})})}}}}]);}).call(this || window)
