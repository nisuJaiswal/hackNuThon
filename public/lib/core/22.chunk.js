/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[22],{490:function(ja,ba,e){function ha(e){return Object(Pa.b)(void 0,void 0,void 0,function(){var f,h,n,r,w,x,y,z,aa,ca,ea;return Object(Pa.d)(this,function(ba){switch(ba.label){case 0:return f=e.xb,h=e.En,n=xb.getDocument(),r=[1],[4,Object(Za.c)(h,{extension:"pdf"})];case 1:return w=ba.ba(),x=xb.pa(),aa=(z=$a.a).U1,[4,w.ly()];case 2:return y=aa.apply(z,[ba.ba().xfdfString,f]),ca=!0,[4,n.Zf(w,r,f,ca)];case 3:return ba.ba(),[4,n.zg([f+
1],ca)];case 4:return ba.ba(),ea=x.mb().filter(function(e){return e.IF()&&e.PageNumber===f}),x.Ze(ea,{force:!0,source:"contentEditTool"}),[4,x.uF(y)];case 5:return ba.ba(),mb||(xb.getDocument().SG(),xb.tA(f),xb.$d()),[2]}})})}function ia(e){if(e)return fa(e.contents);Object(Va.g)("Unable to extract document content")}function fa(e){e=(new DOMParser).parseFromString(e,"text/html").documentElement.querySelector("body");e.querySelectorAll("p").forEach(function(e){e.querySelectorAll("span").forEach(function(e){var f=
e.getAttribute("style");f=z(f,e.innerHTML);e.innerHTML=f});var f=e.getAttribute("style"),h=e.innerHTML.Wh("<br>","");e.innerHTML=z(f,h)});return e.innerHTML.trim()}function z(e,f){if(null===e||void 0===e?0:e.includes("bold"))f="<strong>"+f+"</strong>";if(null===e||void 0===e?0:e.includes("italic"))f="<em>"+f+"</em>";if((null===e||void 0===e?0:e.includes("underline:1;"))||(null===e||void 0===e?0:e.includes("text-decoration: underline")))f="<u>"+f+"</u>";return f}function ea(e){if(["STRONG","EM","U"].includes(e.tagName)&&
null!==e.getAttribute("style")){var f=document.createElement("span"),h=e.style.color;h=xa(h);f.setAttribute("style","color:"+h);e.removeAttribute("style");f.innerHTML=e.innerHTML;e.innerHTML="";e.appendChild(f)}else"SPAN"===e.tagName&&null!==e.getAttribute("style")?(h=e.style.color,h=xa(h),e.setAttribute("style","color:"+h)):"A"===e.tagName&&e.removeAttribute("style")}function aa(e){var f=xb.pa(),h=f.mb().filter(function(f){return f.Ld()&&f.PageNumber===e});f.Ze(h,{force:!0,source:"contentEditTool"})}
function y(e,f){f.forEach(function(f){Zb[e]||(Zb[e]=[]);Zb[e].find(function(e){return e.id===f.id})||Zb[e].push(f)})}function x(e,f){f.forEach(function(f){vb[e]||(vb[e]=[]);vb[e].find(function(e){return e.id===f.id})||vb[e].push(f)})}function w(e,h,n,w){return Object(Pa.b)(void 0,void 0,void 0,function(){var x,y,z,aa,ca,ea,ba,ha,ia,ja,ka,oa,la,ma,pa,qa,Ba;return Object(Pa.d)(this,function(za){switch(za.label){case 0:if(!e)return[2];x=h.Wh("<p><br></p>","");y=r(x);y=y.replace(/<span style="color: var\(--text-color\);">(.*?)<\/span>/g,
"$1");y=y.replace(/<span class="ql-cursor">(.*?)<\/span>/g,"");z=e.Nc.id;aa=e.PageNumber;ca=Jb[aa];ea=ca.galleys.find(function(e){return e.id===z});ba=fa(ea.contents);ha=na(aa,ca,ba,y,z);if(""===ha)return[3,2];ia=new TextEncoder;ja=ia.encode(ha);ka=ja.buffer;oa=Object(nb.c)()||"https://www.pdftron.com/webfonts/v2/";la=xb.getDocument();return[4,la.bd([aa],void 0,!0)];case 1:return ma=za.ba(),pa=f(),cb.postMessage({cmd:"importText",pdfFile:ma,pageNumber:aa,webFontURL:oa,galleyId:z,importData:ka,tableData:pa,
isSearchReplace:n,callbackMapId:w},[ka,pa]),qa={},ea&&(Ba=ea.galleyBox,qa={top:Ba.top,left:Ba.left,bottom:Ba.bottom,right:Ba.right}),Object(Ya.C)(ba,y,qa),[3,3];case 2:Object(Va.g)("Unable to generate import XML"),za.label=3;case 3:return[2]}})})}function r(e){var f=new DOMParser,h=f.parseFromString(e,"text/xml");h.querySelector("parsererror")&&(h=f.parseFromString("<Root>"+e+"</Root>","text/xml"));h.querySelectorAll("a").forEach(function(e){var f=e.childNodes[0];Array.from(e.querySelectorAll("*")).find(function(e){return"u"===
e.tagName.toLowerCase()})||(e=document.createElement("u"),f.after(e),e.appendChild(f))});return(new XMLSerializer).serializeToString(h)}function f(){return(new TextEncoder).encode("").buffer}function n(e,h,n){return Object(Pa.b)(void 0,void 0,void 0,function(){var r;return Object(Pa.d)(this,function(){r=f();cb.postMessage({cmd:"exportFile",pageNumber:h,performExport:n,pdfFile:e,tableData:r},[e,r]);return[2]})})}function ca(e,f,h){return Object(Pa.b)(void 0,void 0,void 0,function(){var r;return Object(Pa.d)(this,
function(w){switch(w.label){case 0:return[4,e.bd([f],void 0,!0)];case 1:return r=w.ba(),n(r,f,h),[2]}})})}function h(e,f,h){return Object(Pa.b)(void 0,void 0,void 0,function(){return Object(Pa.d)(this,function(){aa(f);vb[f]=[];Zb[f]=[];ca(e,f,h);return[2]})})}function la(e){return Object(Pa.b)(void 0,void 0,void 0,function(){return Object(Pa.d)(this,function(){Ob||(xb=e.Ea,Ob=new Promise(function(f,h){var n=window.Core.ContentEdit.getWorkerPath(),r=window.Core.ContentEdit.getResourcePath();cb=new Worker(n+
"InfixServerModule.js");cb.onmessage=function(n){ka(n,f,h,e)};cb.postMessage({cmd:"isReady",resourcePath:r})}));return[2,Ob]})})}function ka(e,f,h,n){return Object(Pa.b)(this,void 0,void 0,function(){var r,w,x,y,z,aa,ca,ea,ba,fa,ia,ja,ka;return Object(Pa.d)(this,function(la){switch(la.label){case 0:r=e.data;w=r.pageNumber;x=r.cmd;y=r.subCmd;aa=x;switch(aa){case "runCommand":return[3,1];case "isReady":return[3,2];case "initialiseInfixServer":return[3,4];case "loadAvailableFonts":return[3,5];case "exportFile":return[3,
6];case "insertNewTextBox":return[3,7];case "importText":return[3,8];case "transformObject":return[3,8];case "alignParagraph":return[3,8];case "deleteObject":return[3,9];case "insertImage":return[3,10];case "dumpTextBox":return[3,11];case "renderGalleyArea":return[3,12];case "renderEditGalley":return[3,13]}return[3,14];case 1:switch(y){case "Edit Page":return Ka(r.resultsXML),[2,!1];case "loadAvailableFonts":return Ma(r.resultsXML),[2,!0]}return[3,14];case 2:return[4,Object(gb.b)()];case 3:return ca=
la.ba(),cb.postMessage({cmd:"initialiseInfixServer",l:ca}),[3,14];case 4:return(ea=pa(r.resultsXML))?(f(),ba=Object(nb.c)()||"https://www.pdftron.com/webfonts/v2/",cb.postMessage({cmd:"loadAvailableFonts",webFontURL:ba})):h("License key does not have content edit permission"),[3,14];case 5:return Ca(r.resultsXML),[3,14];case 6:return r.exportPerformed?oa(w,r.exportXML,r.objectXML,r.resultsXML):(z=Jb[w],ta(w,z)),wc.resolve(),hb&&hb[w]&&hb[w].resolve(),[3,14];case 7:return Ha(w,r.exportXML,r.contentHTML),
z=Jb[w],ha({xb:w,En:r.pdfBuffer,Ip:z,Vu:r.id}),[3,14];case 8:z=Jb[w];Fa(w,r.resultsXML);ha({xb:w,En:r.pdfBuffer,Ip:z,Vu:r.id,E_:r.isSearchReplace});fa=r.isSearchReplace;ia=r.callbackMapId;if(fa&&ia&&Gc[ia])Gc[ia]();return[3,14];case 9:return z=Jb[w],Fa(w,r.resultsXML),z.galleys=z.galleys.filter(function(e){return e.id!==r.id}),z.objects=z.objects.filter(function(e){return e.id!==r.id}),ja={xb:r.pageNumber,En:r.pdfBuffer,Ip:z},ha(ja),[3,14];case 10:return z=Jb[w],Fa(w,r.resultsXML),ka={xb:w,En:r.pdfBuffer,
Ip:z,Vu:r.isText,u_:!0},ha(ka),[3,14];case 11:n.Kba(r.galleyId,r.resultsXML),la.label=12;case 12:return Qa(r),[2,!0];case 13:Sa(r.galleyId,r.imageData),la.label=14;case 14:return[2]}})})}function ma(e,f,h,n,r){this.id=e;this.pagecount=f;this.pageBBox=h;this.galleys=n;this.objects=r}function ra(e,f){this.family=e;this.variations=f}function na(e,f,h,n,r){var w=[],x=[];(new DOMParser).parseFromString(n,"text/html").documentElement.querySelectorAll("p").forEach(function(e,f){w[f]=e.innerHTML;x[f]={fontSize:e.style.fontSize,
fontFamily:e.style.fontFamily,color:xa(e.style.color)}});h=(new DOMParser).parseFromString(h,"text/html");var y=null;h.documentElement.querySelectorAll("p").forEach(function(e,f){if(f<w.length){var h=(new DOMParser).parseFromString(w[f],"text/html").documentElement.querySelector("body");h.childNodes.forEach(function(e){ea(e)});e.innerHTML=h.innerHTML;y=e.getAttribute("style");h=x[f].fontSize?x[f].fontSize:e.style.fontSize;var n=x[f].fontFamily?x[f].fontFamily.replace(/\s+/g,"").replace(/['"]+/g,""):
e.style.fontFamily;f=x[f].color?x[f].color:null;y=y.replace(/(font:.*?;)/i,"font:normal normal "+h+" "+n+";");y=y.replace("Italic","");y=y.replace("underline:1;","underline:0;");y=y.replace("text-decoration: underline;","text-decoration: none;");f&&(y=y.replace(/(color:.*?;)/i,"color:"+f+";"));e.setAttribute("style",y)}else e.remove()});for(n=h.documentElement.querySelectorAll("p").length;n<w.length;n++){var z=document.createElement("p");z.setAttribute("id","0");var aa=(new DOMParser).parseFromString(w[n],
"text/html").documentElement.querySelector("body");aa.childNodes.forEach(function(e){ea(e)});z.innerHTML=aa.innerHTML;null!==y&&z.setAttribute("style",y);h.documentElement.querySelector("body").appendChild(z)}h=h.documentElement.querySelector("body").innerHTML;var ca="";vb[e].forEach(function(e){e.id===r&&(ca=e)});if(""===ca)return"";f="<DOC id='"+f.id+"' pagecount='"+f.pagecount+"'>";f=f+("<STORY galley_ids='"+r+"' pagenum='"+e+"'>")+("<galleys>"+ca.galleysContents+"</galleys>");ca.contents=h;f=
f+h+"\n</STORY>";return f+="</DOC>"}function xa(e){return e.startsWith("rgb(")?"#"+e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"").split(",").map(function(e){return("00"+parseInt(e,10).toString(16)).slice(-2)}).join(""):e}function pa(e){e=new Uint8Array(e);var f=(new TextDecoder("utf-8")).decode(e);e=!1;f=(new DOMParser).parseFromString(f,"text/xml").getElementsByTagName("LicenseCheck");null!==f&&0<f.length&&(f=f[0].getElementsByTagName("Status")[0].innerHTML,"error"!==f&&"ok"===f&&(e=!0));return e}
function Ha(e,f){f=(new TextDecoder("utf-8")).decode(f);f=(new DOMParser).parseFromString(f,"text/xml").getElementsByTagName("STORY");var h=Array.prototype.slice.call(f)[0];f=h.getAttribute("galley_ids");var n=h.getAttribute("galley_oids"),r=Array.prototype.slice.call(h.getElementsByTagName("g"))[0],w=r.getAttribute("bbox").split(" ");w=new bb.c(parseFloat(w[0]),parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]));r=r.innerHTML;var x=Array.prototype.slice.call(h.getElementsByTagName("galleys"))[0];
x.parentNode.removeChild(x);h=sa(h.innerHTML).trim();f=new bb.a({id:f,pagenum:e,galleysContents:r,contents:h,galleyBox:w,oid:n});n=Jb[e];n.galleys.push(f);Jb[e]=n;ta(e,n)}function ta(e,f){x(e,f.galleys);y(e,f.objects)}function oa(e,f,h,n){f=qa(f,h,n);Jb[e]=ua(e,f.iha,f.Una,f.results);ta(e,Jb[e])}function Ba(e){var f=new TextDecoder("utf-8");e=new Uint8Array(e);return f.decode(e)}function qa(e,f,h){e=Ba(e);f=Ba(f);h=Ba(h);return{iha:e,Una:f,results:h}}function za(e,f){e=parseFloat(e);return isNaN(f)||
f<e?e:f}function ua(e,f,h,n){var r;var w=new DOMParser;n=w.parseFromString(n,"text/xml");Array.prototype.slice.call(n.getElementsByTagName("BBox")).forEach(function(e){if("CropBox"===e.getAttribute("Name")){var f=parseFloat(e.getElementsByTagName("Top").item(0).innerHTML),h=parseFloat(e.getElementsByTagName("Bottom").item(0).innerHTML),n=parseFloat(e.getElementsByTagName("Left").item(0).innerHTML);e=parseFloat(e.getElementsByTagName("Right").item(0).innerHTML);r=new bb.c(f,n,h,e)}});w=new DOMParser;
n=w.parseFromString(f,"text/xml");var x=[];Array.prototype.slice.call(n.getElementsByTagName("STORY")).forEach(function(f){var h=f.getAttribute("galley_ids"),n=f.getAttribute("galley_oids"),r=Array.prototype.slice.call(f.getElementsByTagName("g"))[0],w=r.getAttribute("bbox").split(" ");w=new bb.c(parseFloat(w[0]),parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]));r=r.innerHTML;var y=Array.prototype.slice.call(f.getElementsByTagName("galleys"))[0];y.parentNode.removeChild(y);f=sa(f.innerHTML).trim();
h=new bb.a({id:h,pagenum:e,galleysContents:r,contents:f,galleyBox:w,oid:n});x.push(h)});w=new DOMParser;var y=[];f=w.parseFromString(h,"text/xml").getElementsByTagName("Object");Array.prototype.slice.call(f).forEach(function(f){var h=f.getAttribute("Type"),n=f.getAttribute("OID");f=Array.prototype.slice.call(f.getElementsByTagName("Point"));var r=Number.NaN,w=Number.NaN,x=Number.NaN,z=Number.NaN;f.forEach(function(e){var f=e.getAttribute("Name");"TL"===f?(r=za(e.getAttribute("Y"),r),x=za(e.getAttribute("X"),
x)):"TR"===f?(r=za(e.getAttribute("Y"),r),z=za(e.getAttribute("X"),z)):"BR"===f?(w=za(e.getAttribute("Y"),w),z=za(e.getAttribute("X"),z)):"BL"===f&&(w=za(e.getAttribute("Y"),w),x=za(e.getAttribute("X"),x))});f=new bb.c(r,x,w,z);h=new bb.b({type:h,oid:n,objectBox:f,pagenum:e});y.push(h)});f=Array.prototype.slice.call(n.getElementsByTagName("DOC"))[0].getAttribute("id");return new ma(f,1,r,x,y)}function sa(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.querySelector("body").innerHTML}
function Fa(e,f){var h;f=(new TextDecoder("utf-8")).decode(f);var n=(new DOMParser).parseFromString(f,"text/xml");f=n.getElementsByTagName("Galley").item(0);if(null!==f){var r=f.getAttribute("id");f=n.getElementsByTagName("BBox");f=Array.prototype.slice.call(f);f.forEach(function(e){var f=e.getElementsByTagName("Top"),n=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Left");var r=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Bottom");var w=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Right");
e=parseFloat(f.item(0).innerHTML);h=new bb.c(n,r,w,e)});vb[e].forEach(function(e){e.id===r&&!0===h.Dx(e.galleyBox)&&(e.galleyBox=h)})}f=n.getElementsByTagName("Object").item(0);if(null!==f){var w=f.getAttribute("OID");f=n.getElementsByTagName("BBox");f=Array.prototype.slice.call(f);f.forEach(function(e){var f=e.getElementsByTagName("Top"),n=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Left");var r=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Bottom");var w=parseFloat(f.item(0).innerHTML);
f=e.getElementsByTagName("Right");e=parseFloat(f.item(0).innerHTML);h=new bb.c(n,r,w,e)});Zb[e].forEach(function(e){e.oid===w&&!0===h.Dx(e.objectBox)&&(e.objectBox=h)})}f=n.getElementsByTagName("NewParas").item(0);if(null!==f){var x=f.getAttribute("id");vb[e].forEach(function(e){if(e.id===x){var f="<Contents>"+e.contents;f+="</Contents>";var h=Array.prototype.slice.call(n.getElementsByTagName("NewPara"));f=(new DOMParser).parseFromString(f,"text/xml");var r=Array.prototype.slice.call(f.getElementsByTagName("p"));
h.forEach(function(e){var f=parseFloat(e.innerHTML),h=!1;r.forEach(function(e){var n=e.getAttribute("id");!1===h&&"0"===n&&(e.setAttribute("id",f),h=!0)})});e.contents=f.getElementsByTagName("Contents").item(0).innerHTML}})}}function Ea(e){return{regex:0!==(e&ab.f.$s),wildcard:0!==(e&ab.f.nq),wholeWord:0!==(e&ab.f.dt),caseSensitive:0!==(e&ab.f.iq)}}function Ca(e){e=new Uint8Array(e);e=(new TextDecoder("utf-8")).decode(e);e=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Font");
var f={};Array.prototype.slice.call(e).forEach(function(e){var h=e.getAttribute("Family");h in f||(f[h]={});var n=[];Array.prototype.slice.call(e.getElementsByTagName("Variation")).forEach(function(e){e=e.innerHTML;n.push(e);if(e.includes("Regular")||e===h.replace(/\s+/g,""))f[h].hasRegular=!0;e.includes("Bold")&&(f[h].hasBold=!0);e.includes("Italic")&&(f[h].hasItalic=!0)});Ec.push(new ra(h,n))});Fc=Object.keys(f).filter(function(e){return f[e].hasRegular&&f[e].hasBold&&f[e].hasItalic})}function Da(e){var f=
null;Wa.forEach(function(h){h.Rz===e&&(f=h)});return f}function Ga(e,f,h,n,r){void 0===n&&(n=0);void 0===r&&(r=0);var w=e.querySelector("._iceni_galleyInput");null!==w?(e=w.A$,0<e.length&&(w.dispatchEvent(new Event("input")),n=e[e.length-1].Hza,0===Hb&&(Hb=setTimeout(function(){},75))),w.B$=-1):(w=document.createElement("div"),w.style.color="transparent",w.style.caretColor="black",w.className="_iceni_galleyInput",w.style.display="block",w.style.left="0%",w.style.top="0%",w.style.width="110%",w.style.height=
"100%",w.style.padding="0",w.style.margin="0",w.style.position="absolute",w.style.overflow="clip",w.contentEditable=!0,w.spellcheck=!1,w.A$=[],w.B$=-1,w.addEventListener("keydown",ya),w.addEventListener("focusin",Ia),w.addEventListener("focusout",La),w.focus(),e.appendChild(w));w.Bxa=!1;n=Aa(w,f,h.clientWidth,h.clientHeight,n,r);f=n.sca;h=n.tca;n=n.loa;r=n.length;for(e=0;e<r;e++){for(var x=n[e],y=x.childNodes.length,z=0;z<y;z++){var aa=x.childNodes[z],ca=Number(aa.dataset.f6);-1!==ca&&(aa.style["margin-left"]=
100*(ca-aa.offsetLeft-(aa.offsetWidth-Number(aa.dataset.width))/2)/w.clientWidth+"%")}x.style["margin-top"]=100*(Number(x.dataset.rwa)-x.offsetTop)/w.clientWidth+"%"}if(window.getSelection&&null!==f){w=window.getSelection();w.removeAllRanges();n=new Range;n.setStart(f,0);null!==h&&f!==h&&n.setEnd(h,0);try{w.addRange(n)}catch(hc){console.error(hc)}}}function Ia(){if(this.hasOwnProperty("_iceni_range")){var e=window.getSelection();e.removeAllRanges();e.addRange(this.C$)}}function La(){var e=Ja(this);
null!=e&&(this.C$=e)}function ya(){}function Ja(e){if(!e)return null;var f=window.getSelection();if(!f)return null;try{var h=f.getRangeAt(0)}catch(Oc){return null}if(!h&&e.contains(h.startContainer)&&e.contains(h.endContainer))return h}function Aa(e,f,h,n,r,w){for(var x=null,y=[],z=f.pd,aa=null,ca=null,ea=0,ba=document.getElementsByClassName("_iceni_text-padding");ba[0];)ba[0].parentNode.removeChild(ba[0]);ba=f.Ls;f=ba.length;var ha=window.getComputedStyle(e,null).getPropertyValue("font-size");ha=
parseFloat(ha)/100;for(var fa=0;fa<f;fa++){var ia=0;var ja=ba[fa],ka=ja.Ox,oa=ka.length,la=e.children.length,ma=ea+oa;if(fa>=la||r>=ea&&r<ma||w>=ea&&w<ma||ja.refresh){ja.refresh=!1;x=document.createElement("p");x.className="para-sel";x.style.content="";x.style.margin="0";x.style.padding="0";for(ja=0;ja<oa;ja++){var na=ka[ja],pa=na.pd;ma=Math.round((pa.left-z.left)*h/z.width);var qa=Math.round((pa.right-pa.left)*h/z.width),Ba=n/z.height,za=Math.round((z.top-pa.top)*Ba);pa=Math.round(pa.height*Ba*100/
ha)/100;if(0===ia||za<ia)ia=za;za=Number(na.c);32===za?za=160:45===za?za=8209:9===za?za=160:1!==oa||10!==za&&12!==za||(za=65279);na=document.createElement("span");na.className="_iceni_text-sel";na.style.content="";na.style.margin="0";na.style.padding="0";na.style["font-size"]=pa+"%";na.dataset.f6=ma;na.dataset.width=qa;na.appendChild(document.createTextNode(String.fromCharCode(za)));x.appendChild(na);r===ea&&(aa=na);w===ea&&(ca=na);ea++}x.dataset.rwa=ia;y.push(x)}else ea+=oa;x&&(fa<la?e.replaceChild(x,
e.childNodes[fa]):e.appendChild(x))}for(;ea<=r;)x=e.lastChild,aa=x.lastChild,na=document.createElement("span"),na.className="_iceni_text-sel _iceni_text-padding",na.style.content="",na.style.margin="0",na.style.padding="0",na.style["font-size"]=aa.style["font-size"],na.dataset.f6="-1",na.appendChild(document.createTextNode("\ufeff")),x.appendChild(na),ca=aa=na,ea++;e.Cxa=ea--;r=e.children.length;if(r>f)for(fa=r-1;fa>=f;fa--)e.removeChild(e.lastChild);return{sca:aa,tca:ca,loa:y}}function va(e,f,h){f=
new Uint8Array(h);f=(new TextDecoder("utf-8")).decode(f);h=(new DOMParser).parseFromString(f,"text/xml");var n=h.getElementsByTagName("TextBox");f=-1;0!==n.length&&(f=parseInt(n[n.length-1].getAttribute("Lines"),10));Array.prototype.slice.call(h.getElementsByTagName("Line")).forEach(function(f){var h=null,n=new bb.d(0,0),r=Array.prototype.slice.call(f.getElementsByTagName("UC"));f=parseInt(f.getAttribute("Num"),10);var w=new bb.h;r.forEach(function(e){var f=e.innerHTML.split(" ");e=f[0];null!==h&&
(n=h.pd.Vt);var r=Object(bb.i)(f[1],f[2],n);null!==h&&(n=h.pd.Oq);var x=Object(bb.i)(f[3],f[4],n);null!==h&&(n=h.pd.sw);var y=Object(bb.i)(f[5],f[6],n);null!==h&&(n=h.pd.Nl);f=Object(bb.i)(f[7],f[8],n);r=new bb.e(f,y,r,x);h=e=new bb.f(e,r);w.Ox.push(e);w.refresh=!0});f+1>e.Ls.length?e.Ls.push(w):e.Ls[f]=w});h=h.getElementsByTagName("Overset");null!==h&&(h=Array.prototype.slice.call(h),0<h.length&&("1"===h[0].innerHTML.split(":")[1]?e.j1=!0:e.j1=!1));h=e.Ls.length;if(-1!==f&&h>f)for(--h;h>=f;h--)e.Ls.pop()}
function Ka(e){e=new Uint8Array(e);e=(new TextDecoder("utf-8")).decode(e);Wa=[];e=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Object");Array.prototype.slice.call(e).forEach(function(e){if("Text"===e.getAttribute("Subtype")){var f=void 0,h=e.getAttribute("OID");e=e.getElementsByTagName("Quad");if(null!==e&&0<e.length){var n,r,w,x;Array.prototype.slice.call(e[0].getElementsByTagName("Point")).forEach(function(e){var f=parseFloat(e.getAttribute("X")),h=parseFloat(e.getAttribute("Y"));
e=e.getAttribute("Name");"TL"===e?n=new bb.d(f,h):"TR"===e?r=new bb.d(f,h):"BR"===e?w=new bb.d(f,h):x=new bb.d(f,h)});f=new bb.e(n,r,x,w)}f=new bb.g(h,f);Wa.push(f)}})}function Ma(e){e=new Uint8Array(e);e=(new TextDecoder("utf-8")).decode(e);e=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Variation");Array.prototype.slice.call(e).forEach(function(e){var f=e.getAttribute("StrippedName");bc.push(new Ra(e.innerHTML,f))})}function Ra(){}function Qa(e){var f=Da(e.galleyId);f=wa(f.Rz);
if(null!==f){var h=f.getContext("2d"),n=new Image;n.onload=function(){h.drawImage(n,e.xOffset,e.yOffset,e.width,e.height)};f=new Uint8Array(e.imageData);n.src="data:image/png;base64,"+Na(f)}}function wa(e){return(e=document.getElementById("_iceni_galleyEdit_"+e))?e.querySelector("._iceni_galleyCanvas"):null}function Na(e){var f="",h,n=e.length;for(h=2;h<n;h+=3)f+=cc[e[h-2]>>2],f+=cc[(e[h-2]&3)<<4|e[h-1]>>4],f+=cc[(e[h-1]&15)<<2|e[h]>>6],f+=cc[e[h]&63];h===n+1&&(f+=cc[e[h-2]>>2],f+=cc[(e[h-2]&3)<<
4],f+="==");h===n&&(f+=cc[e[h-2]>>2],f+=cc[(e[h-2]&3)<<4|e[h-1]>>4],f+=cc[(e[h-1]&15)<<2],f+="=");return f}function Sa(e,f){var h=wa(e),n=new Image;n.onload=function(){h.getContext("2d").drawImage(n,0,0,h.width,h.height)};e=new Uint8Array(f);n.src="data:image/png;base64,"+Na(e)}function Ta(){document.querySelectorAll("._iceni_galleyCanvas").forEach(function(e){if(e.width!==e.clientWidth||e.height!==e.clientHeight){e.width=e.clientWidth;e.height=e.clientHeight;var f=e.parentElement,h=Da(f.dataset.gid);
f.D$=f.clientWidth/h.pd.width;f=f.D$;var n="imageFile"+(h.Rz+f)+".png";var r='<Commands>\n\t<Command Name="Render" FileFormat="png">\n'+("\t\t<BBox>\n\t\t\t<Left>"+h.pd.Nl.x+"</Left>\n");r+="\t\t\t<Top>"+h.pd.Nl.y+"</Top>\n";r+="\t\t\t<Right>"+h.pd.Oq.x+"</Right>\n";r+="\t\t\t<Bottom>"+h.pd.Oq.y+"</Bottom>\n\t\t</BBox>\n";r=r+("\t\t<Width>"+e.width+"</Width>\n")+("\t\t<Height>"+e.height+"</Height>\n");r=r+"\t\t<StartPage>1</StartPage>\n\t\t<EndPage>1</EndPage>\n"+("\t\t<File>"+n+"</File>\n")+"\t\t<ShowInvisibles/>\n";
r+="\t</Command>\n";r+="</Commands>";cb.postMessage({cmd:"renderEditGalley",resultsFile:"results"+(h.Rz+f)+".xml",commandXML:r,commandFile:"commands0.xml",imageFName:n,galleyId:h.Rz})}});setTimeout(Ta,100)}e.r(ba);var Pa=e(0),Za=e(37),nb=e(31),gb=e(59),Va=e(3),Ya=e(39),$a=e(6),kb=e(145),ab=e(27),Gb=e(9),Cb=e(25),bb=e(259),Hb=0,Wa=[],cb,Ob,mb=!1,bc=[],vb={},Zb={},Jb={},xb,wc=window.createPromiseCapability(),hb=[],Ec=[],Fc=[],cc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),
Gc={};ba["default"]={ZU:function(e){return Object(Pa.b)(void 0,void 0,void 0,function(){var f,h,n,r,w,x,y,z,aa,ca;return Object(Pa.d)(this,function(ea){switch(ea.label){case 0:return f=e.pageNumber,h=e.newImage,n=e.scaleType,r=e.position,w=r.top,x=r.left,y=r.bottom,z=r.right,aa=xb.getDocument(),[4,aa.bd([f],void 0,!0)];case 1:return ca=ea.ba(),cb.postMessage({cmd:"insertImage",pdfFile:ca,pageNumber:f,newImage:h,scaleType:n,topVal:w,leftVal:x,bottomVal:y,rightVal:z},[]),[2]}})})},$U:function(e,f){return Object(Pa.b)(void 0,
void 0,void 0,function(){var h,n,r,w,x,y,z,aa,ca,ba,ha,fa,ia,ja,ka;return Object(Pa.d)(this,function(oa){switch(oa.label){case 0:return h="<DOC><STORY><galleys></galleys>",n=[],r=(new DOMParser).parseFromString(f,"text/html"),r.documentElement.querySelectorAll("p").forEach(function(e,f){n[f]=e.innerHTML}),n.forEach(function(e,f){e=(new DOMParser).parseFromString(n[f],"text/html").documentElement.querySelector("body");e.childNodes.forEach(function(e){ea(e)});h+="<p>"+e.innerHTML+"</p>"}),h+="</STORY></DOC>",
w=e.pageNumber,x=xb.getDocument(),y=e.position,z=y.top,aa=y.left,ca=y.bottom,ba=y.right,ha=e.defaultText,fa=e.font,ia=e.fontSize,ja=e.textColor,[4,x.bd([w],void 0,!0)];case 1:return ka=oa.ba(),cb.postMessage({cmd:"insertNewTextBox",pdfFile:ka,pageNumber:w,topVal:z,leftVal:aa,bottomVal:ca,rightVal:ba,defaultText:ha,font:fa,fontSize:ia,textColor:ja,importData:h,content:f}),[2]}})})},hV:function(e,h){return Object(Pa.b)(void 0,void 0,void 0,function(){var n,r,w,x,y;return Object(Pa.d)(this,function(z){switch(z.label){case 0:return n=
e.Nc.id,r=e.PageNumber,w=xb.getDocument(),[4,w.bd([r],void 0,!0)];case 1:return x=z.ba(),y=f(),cb.postMessage({cmd:"AlignParaText",pdfFile:x,pageNumber:r,galleyID:n,alignment:h,topVal1:"",leftVal1:"",bottomVal1:"",rightVal1:"",topVal2:"",leftVal2:"",bottomVal2:"",rightVal2:"",tableData:y},[y]),[2]}})})},Jba:function(e){cb.postMessage({cmd:"runCommand",subCmd:"Edit Page",resultsFile:"results0.xml",commandXML:'<Commands><Command Name="Edit Page"><ImagesAndText/>'+("<WebFontURL>"+e+"</WebFontURL></Command></Commands>"),
commandFile:"commands0.xml"})},HV:function(e){var f=fa(e.Nc.contents);f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("body");var h=f.querySelectorAll("p"),n=new XMLSerializer,r="bold"===h[0].style.fontWeight,x=n.serializeToString(h[0]).includes("<strong>");h.forEach(function(e){if(r||x){e.style.fontWeight="normal";var f=n.serializeToString(e).replace(/<strong>/g,"");f=f.replace(/<\/strong>/g,"");f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("p");
e.parentElement.replaceChild(f,e)}else e.style.fontWeight="bold",e.innerHTML="<strong>"+e.innerHTML.trim()+"</strong>"});f=n.serializeToString(f);w(e,f)},NW:function(e){return Object(Pa.b)(void 0,void 0,void 0,function(){var h,n,r,w,x,y;return Object(Pa.d)(this,function(z){switch(z.label){case 0:return h=e.id,n=e.isText,r=e.pageNumber,w=xb.getDocument(),[4,w.bd([r],void 0,!0)];case 1:return x=z.ba(),y=f(),cb.postMessage({cmd:"deleteObject",pdfFile:x,pageNumber:r,objectID:h,isText:n,tableData:y},[y]),
[2]}})})},Ffa:Ta,xY:ia,P_:function(e){var f=fa(e.Nc.contents);f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("body");var h=f.querySelectorAll("p"),n=new XMLSerializer,r="italic"===h[0].style.fontStyle,x=n.serializeToString(h[0]).includes("<em>");h.forEach(function(e){if(r||x){e.style.fontStyle="normal";e.style.font.includes("Italic")&&(e.style.font=e.style.font.replace("Italic",""));var f=n.serializeToString(e).replace(/<em>/g,"");f=f.replace(/<\/em>/g,"");f=(new DOMParser).parseFromString(f,
"text/html").documentElement.querySelector("p");e.parentElement.replaceChild(f,e)}else e.style.fontStyle="italic",e.innerHTML="<em>"+e.innerHTML.trim()+"</em>"});f=n.serializeToString(f);w(e,f)},mY:function(){return Fc},S1:la,T1:h,Xma:function(e,f){void 0===f&&(f=1);var h='<Commands>\n\t<Command Name="ShowInvisibles" OID="'+e.oid+'">true</Command>\n\t<Command Name="Dump Text Box" OID="'+e.oid+'">\n\t</Command>\n</Commands>';cb.postMessage({cmd:"dumpTextBox",galleyId:e.oid,resultsFile:"results"+(e.oid+
f)+".xml",commandXML:h,commandFile:"commands0.xml"});return h},u3:function(e){return Object(Pa.b)(this,void 0,void 0,function(){var f,n,r,x,y,z,aa,ca,ea,ba,ha,fa,ja,ka,oa,ma,na,pa,qa,Ba,za,ra,ua=this;return Object(Pa.d)(this,function(xa){switch(xa.label){case 0:f=e.replaceWith;n=e.documentViewer;r=e.search;x=e.searchResults;if(n){if(!x&&!r)throw Error('The "searchResults" parameter is missing in the options');if(void 0===f)throw Error('The "replaceWith" parameter should not be undefined');}else throw Error('The "documentViewer" parameter is missing in the options');
y=1===x.length;r?(z=r.HK,aa=r.pR):(ca=Ea(n.By()),z=ca.HK,aa=ca.pR);ea=null;ba=[];if(y)ea=x[0],ba=[ea.pageNum];else try{ba=Object.keys(x.reduce(function(e,f){e[f.pageNum]=f.pageNum;return e},{})).map(function(e){return Number(e)})}catch(pb){Object(Va.i)(pb)}ha=0;if(ea)for(fa=n.Aj(),ja=-1,ka=0,oa=fa.length;ka<oa&&(ma=fa[ka],ma.pageNum===ja?ha++:(ja=ma.pageNum,ha=0),!Object(kb.a)(ma,ea));ka++);na=x[0].resultStr;pa=z?"mg":"mgi";qa=aa?"\\b("+na+")\\b":"("+na+")";Ba=new RegExp("(?<!</?[^>]*|&[^;]*)"+qa,
pa);wc=window.createPromiseCapability();return Ob?[3,2]:[4,la(n.fp())];case 1:xa.ba(),xa.label=2;case 2:return Ya.a.trigger(Gb.e.SEARCH_AND_REPLACE_STARTED),za=0,ra=ba.map(function(e){return Object(Pa.b)(ua,void 0,void 0,function(){var r,z=this;return Object(Pa.d)(this,function(){r=new Promise(function(r,aa){return Object(Pa.b)(z,void 0,void 0,function(){var z=this;return Object(Pa.d)(this,function(ca){switch(ca.label){case 0:return hb[e]=window.createPromiseCapability(),[4,h(n.getDocument(),e,!0)];
case 1:return ca.ba(),hb[e].promise.then(function(){return Object(Pa.b)(z,void 0,void 0,function(){function h(e,f){return Object(Pa.b)(this,void 0,void 0,function(){var h,n;return Object(Pa.d)(this,function(x){switch(x.label){case 0:h=Object(Cb.f)(),Gc[h]=function(){delete Gc[h];r(!0);Ya.a.trigger(Gb.e.SEARCH_AND_REPLACE_TEXT_REPLACED)},x.label=1;case 1:return x.Qe.push([1,3,,4]),[4,w(e,f,!0,h)];case 2:return x.ba(),[3,4];case 3:return n=x.ba(),Object(Va.i)(n),aa(n),[3,4];case 4:return[2]}})})}var n,
z,ca,ba,fa,ja,ka,oa,la,ma,pa,qa,ra,ua,xa,sa,Ga;return Object(Pa.d)(this,function(){n=xb.pa();z=n.mb().filter(function(f){return f.PageNumber===e}).filter(function(e){return e.Ld()}).concat();ca=[];fa=ba=0;for(ja=z.length;fa<ja;fa++){ka=z[fa];oa=ka.Nc;la=ia(oa);ma=[];try{for(pa=void 0;null!==(pa=Ba.exec(la));)ma.push(pa),ca.push(x[za]),za++}catch(Qb){Object(Va.i)(Qb)}if(ma.length)if(ba+=ma.length,y&&ba>ha){qa=Math.abs(ba-ma.length-ha);ra=ma[qa].index;ua=la.substr(0,ra);xa=f;sa=la.substr(ra+na.length,
la.length);Ga=""+ua+xa+sa;Ya.a.trigger(Gb.e.SEARCH_AND_REPLACE_TEXT_FOUND,[[ea]]);h(ka,Ga);break}else y||(mb=!0,Ga=la.replace(Ba,f),Ya.a.trigger(Gb.e.SEARCH_AND_REPLACE_TEXT_FOUND,[ca]),h(ka,Ga))}return[2]})})}).catch(aa),[2]}})})});return[2,r]})})}),[2,Promise.all(ra).then(function(){y&&ea?setTimeout(function(){var e=[];n.pw(x[0].resultStr,n.By(),{startPage:ba[0],endPage:ba[0],fullSearch:!0,onDocumentEnd:function(){mb=!1;Ya.a.trigger(Gb.e.SEARCH_AND_REPLACE_ENDED);n.YH(ba[0]-1,e)},onResult:function(f){f.resultCode===
ab.e.$l&&e.push(f)}})},200):(n.OK(),n.Cl(),n.$d(),mb=!1,Ya.a.trigger(Gb.e.SEARCH_AND_REPLACE_ENDED));var e=xb.pa(),f=e.mb().filter(function(e){return e.Ld()});e.Ze(f,{force:!0,source:"contentEditTool"})})]}})})},N3:function(e,f){var h=fa(e.Nc.contents);h=(new DOMParser).parseFromString(h,"text/html").documentElement.querySelector("body");var n=h.querySelectorAll("p"),r=new XMLSerializer;n.forEach(function(e){e.style.fontFamily=f});h=r.serializeToString(h);w(e,h)},O3:function(e,f){var h=fa(e.Nc.contents);
h=(new DOMParser).parseFromString(h,"text/html").documentElement.querySelector("body");var n=h.querySelectorAll("p"),r=new XMLSerializer;n.forEach(function(e){e.style.fontSize=f});h=r.serializeToString(h);w(e,h)},l4:function(e,f){var h=fa(e.Nc.contents);h=(new DOMParser).parseFromString(h,"text/html").documentElement.querySelector("body");var n=h.querySelectorAll("p"),r=new XMLSerializer;n.forEach(function(e){e.style.color=f});h.querySelectorAll("span").forEach(function(e){e.setAttribute("style",
"color:"+f)});h=r.serializeToString(h);w(e,h)},Yma:function(e,f,h){e=Da(e);e.Ls=[];va(e,"Export Page",f);f=document.createElement("canvas");f.className="_iceni_galleyCanvas";f.style.display="block";f.style.left="0%";f.style.top="0%";f.style.width="100%";f.style.height="100%";f.style.padding="0";f.style.margin="0";f.style.position="absolute";h.appendChild(f);Ga(h,e,f)},w5:function(e){return Object(Pa.b)(void 0,void 0,void 0,function(){var h,n,r,w,x,y,z,aa,ca,ea,ba,ha;return Object(Pa.d)(this,function(fa){switch(fa.label){case 0:return h=
e.id,n=e.position,r=n.top,w=n.left,x=n.bottom,y=n.right,z=e.isText,aa=e.pageNumber,ca=xb.getDocument(),[4,ca.bd([aa],void 0,!0)];case 1:return ea=fa.ba(),ba=f(),ha={cmd:"transformObject",pdfFile:ea,pageNumber:aa,objectID:h,isText:z,topVal:r,leftVal:w,bottomVal:x,rightVal:y,tableData:ba},cb.postMessage(ha,[ba]),[2]}})})},F5:w,y5:function(e){var f=fa(e.Nc.contents);f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("body");var h=f.querySelectorAll("p"),n=new XMLSerializer,
r=h[0].style.textDecoration.includes("underline")||h[0].style.textDecoration.includes("word"),x=n.serializeToString(h[0]).includes("<u>");h.forEach(function(e){if(r||x){e.style.textDecoration=e.style.textDecoration.replace("underline","");var f=n.serializeToString(e).replace(/<u>/g,"");f=f.replace(/<\/u>/g,"");f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("p");e.parentElement.replaceChild(f,e)}else e.style.textDecoration.includes("none")?e.style.textDecoration=e.style.textDecoration.replace("none",
"underline"):e.style.textDecoration+=" underline",e.innerHTML="<u>"+e.innerHTML.trim()+"</u>"});f=n.serializeToString(f);w(e,f)},fha:ca,Zya:function(){return cb},Nya:n,AAa:function(){cb&&(cb.terminate(),Ob=cb=null)},gAa:ka,fAa:oa,$xa:qa,Uza:ua}}}]);}).call(this || window)
